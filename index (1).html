<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#7c3aed">
  <title>Task Tracker</title>
  
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlRhc2sgVHJhY2tlciIsCiAgInNob3J0X25hbWUiOiAiVGFza3MiLAogICJkZXNjcmlwdGlvbiI6ICJUcmFjayB5b3VyIHRhc2tzIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMwZjE3MmEiLAogICJ0aGVtZV9jb2xvciI6ICIjN2MzYWVkIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4T1RJaUlHaGxhV2RvZEQwaU1Ua3lJajQ4Y21WamRDQjNhV1IwYUQwaU1Ua3lJaUJvWldsbmFIUTlJakU1TWlJZ1ptbHNiRDBpSXpkak0yRmxaQ0l2UGp4d1lYUm9JR1E5SWsweE1EQWdOVFpETVRBd0lESTNMallnT0RjdU5pQXhJRGMwSURFZ1NERXVNak5ETGprZ01TQXVNRFFnTWprdU55QXVNRFFnTmpNZ1MyTXdJRE15TGprZ01qY3VOaUEyTWlBMk15QTJNbE14T1RFdU9UWWdPRGN1TmlBeE9USWdOalpXTVRNMll5MHVNRFFnTXpJdU9TMDBNeUF6TWk0NUxUWXpJRE15U0RZMFF5MHlNQzR5SURBdE16WXVOUzB4Tmk0MkxUTTJMalV0TXpjdU0xWXlPV013TFRJd0xqSWdNVFl1TXkwek5pNDFJRE0yTGpVdE16WXVOVWd4TWpoak1qQXVNaUF3SURNMkxqVWdJREUyTGpNZ016WXVOU0F6Tnk0elZqRXhNSE10TkRNeUxqTWdOREk0TGpRdE56WTRMVEN6WTRJRm9pSUdacGJHdzlJaU5tWm1ZaUx6NDhMM04yWno0PSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
      min-height: 100vh;
      color: white;
      padding: 20px;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      margin-bottom: 40px;
      padding-top: 40px;
    }
    
    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .header p {
      color: #c4b5fd;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 20px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 0.875rem;
      color: #c4b5fd;
    }
    
    .progress-bar {
      background: rgba(255, 255, 255, 0.2);
      height: 8px;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4ade80, #10b981);
      transition: width 0.5s;
    }
    
    .add-task-section {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .input-row {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .task-input {
      flex: 1;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      padding: 15px 20px;
      color: white;
      font-size: 1rem;
    }
    
    .task-input::placeholder {
      color: #c4b5fd;
    }
    
    .btn {
      background: linear-gradient(135deg, #a855f7, #ec4899);
      border: none;
      border-radius: 15px;
      padding: 15px 30px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
    }
    
    .btn:hover {
      opacity: 0.9;
    }
    
    .controls-row {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .category-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      color: #c4b5fd;
      cursor: pointer;
      font-weight: 600;
    }
    
    .category-btn.active {
      color: white;
    }
    
    .category-btn.clients.active {
      background: #3b82f6;
    }
    
    .category-btn.projects.active {
      background: #a855f7;
    }
    
    .category-btn.personal.active {
      background: #22c55e;
    }
    
    .deadline-input {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 10px;
      padding: 10px 15px;
      color: white;
    }
    
    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      overflow-x: auto;
    }
    
    .filter-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      color: white;
      cursor: pointer;
      white-space: nowrap;
    }
    
    .filter-btn.active {
      background: white;
      color: #581c87;
    }
    
    .tasks-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .task-item {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 20px;
      display: flex;
      align-items: start;
      gap: 15px;
    }
    
    .task-item.completed {
      opacity: 0.6;
    }
    
    .checkbox {
      width: 24px;
      height: 24px;
      border: 2px solid #c4b5fd;
      border-radius: 50%;
      cursor: pointer;
      flex-shrink: 0;
      margin-top: 3px;
    }
    
    .checkbox.checked {
      background: #22c55e;
      border-color: #22c55e;
      position: relative;
    }
    
    .checkbox.checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 14px;
    }
    
    .task-content {
      flex: 1;
    }
    
    .task-tags {
      display: flex;
      gap: 10px;
      margin-bottom: 8px;
    }
    
    .tag {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    
    .tag.clients {
      background: #3b82f6;
    }
    
    .tag.projects {
      background: #a855f7;
    }
    
    .tag.personal {
      background: #22c55e;
    }
    
    .tag.deadline {
      background: rgba(59, 130, 246, 0.3);
      color: #93c5fd;
    }
    
    .tag.overdue {
      background: rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }
    
    .tag.today {
      background: rgba(251, 191, 36, 0.3);
      color: #fcd34d;
    }
    
    .task-text {
      font-size: 1rem;
    }
    
    .task-text.completed {
      text-decoration: line-through;
    }
    
    .delete-btn {
      background: none;
      border: none;
      color: #f87171;
      cursor: pointer;
      font-size: 1.2rem;
      padding: 5px;
    }
    
    .empty-state {
      text-align: center;
      padding: 80px 20px;
      color: #c4b5fd;
    }
    
    .empty-state-icon {
      font-size: 3rem;
      margin-bottom: 20px;
    }
    
    .notification-banner {
      background: rgba(251, 191, 36, 0.2);
      border: 1px solid rgba(251, 191, 36, 0.5);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .notification-btn {
      background: #f59e0b;
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Task Tracker</h1>
      <p>Your daily progress dashboard</p>
    </div>

    <div class="stats">
      <div class="stat-card">
        <div class="stat-value" id="completion-rate">0%</div>
        <div class="stat-label">Completion</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-bar" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-value">‚ö° <span id="streak">0</span></div>
        <div class="stat-label">Day Streak</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-value" id="pending-count">0</div>
        <div class="stat-label">Pending</div>
        <div class="stat-label" style="margin-top: 5px;">
          <span id="completed-count">0</span> completed
        </div>
      </div>
    </div>

    <div class="notification-banner" id="notification-banner" style="display: none;">
      <div>
        <div style="font-weight: 600; margin-bottom: 5px;">üîî Enable Notifications</div>
        <div style="font-size: 0.875rem; color: #fcd34d;">Get reminded of due tasks</div>
      </div>
      <button class="notification-btn" onclick="requestNotifications()">Enable</button>
    </div>

    <div class="add-task-section">
      <div class="input-row">
        <input 
          type="text" 
          class="task-input" 
          id="task-input" 
          placeholder="Add a new task..."
          onkeypress="if(event.key==='Enter') addTask()"
        >
        <button class="btn" onclick="addTask()">‚ûï Add</button>
      </div>

      <div class="controls-row">
        <button class="category-btn personal active" data-category="personal" onclick="selectCategory('personal')">Personal</button>
        <button class="category-btn clients" data-category="clients" onclick="selectCategory('clients')">Clients</button>
        <button class="category-btn projects" data-category="projects" onclick="selectCategory('projects')">Projects</button>
        
        <input type="date" class="deadline-input" id="deadline-input">
      </div>
    </div>

    <div class="filters">
      <button class="filter-btn active" onclick="setFilter('all')">All</button>
      <button class="filter-btn" onclick="setFilter('active')">Active</button>
      <button class="filter-btn" onclick="setFilter('completed')">Completed</button>
      <button class="filter-btn" onclick="setFilter('clients')">Clients</button>
      <button class="filter-btn" onclick="setFilter('projects')">Projects</button>
      <button class="filter-btn" onclick="setFilter('personal')">Personal</button>
    </div>

    <div class="tasks-list" id="tasks-list"></div>
  </div>

  <script>
    let tasks = [];
    let selectedCategory = 'personal';
    let currentFilter = 'all';

    // Load tasks from localStorage
    function loadTasks() {
      const stored = localStorage.getItem('taskTrackerData');
      if (stored) {
        tasks = JSON.parse(stored);
      }
      checkNotifications();
      renderTasks();
    }

    // Save tasks to localStorage
    function saveTasks() {
      localStorage.setItem('taskTrackerData', JSON.stringify(tasks));
      renderTasks();
    }

    function checkNotifications() {
      if ('Notification' in window && Notification.permission !== 'granted') {
        document.getElementById('notification-banner').style.display = 'flex';
      }
    }

    function requestNotifications() {
      if ('Notification' in window) {
        Notification.requestPermission().then(permission => {
          if (permission === 'granted') {
            document.getElementById('notification-banner').style.display = 'none';
            checkDueTasks();
          }
        });
      }
    }

    function checkDueTasks() {
      if ('Notification' in window && Notification.permission === 'granted') {
        const today = new Date().toISOString().split('T')[0];
        tasks.forEach(task => {
          if (!task.completed && task.deadline === today && !task.notified) {
            new Notification('Task Due Today! üéØ', {
              body: `"${task.text}" is due today`
            });
            task.notified = true;
          }
        });
        saveTasks();
      }
    }

    function selectCategory(category) {
      selectedCategory = category;
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelector(`.category-btn[data-category="${category}"]`).classList.add('active');
    }

    function addTask() {
      const input = document.getElementById('task-input');
      const deadlineInput = document.getElementById('deadline-input');
      const text = input.value.trim();
      
      if (!text) return;

      const task = {
        id: Date.now(),
        text: text,
        category: selectedCategory,
        deadline: deadlineInput.value || null,
        completed: false,
        createdAt: new Date().toISOString(),
        notified: false
      };

      tasks.unshift(task);
      input.value = '';
      deadlineInput.value = '';
      saveTasks();
    }

    function toggleTask(id) {
      const task = tasks.find(t => t.id === id);
      if (task) {
        task.completed = !task.completed;
        saveTasks();
      }
    }

    function deleteTask(id) {
      tasks = tasks.filter(t => t.id !== id);
      saveTasks();
    }

    function setFilter(filter) {
      currentFilter = filter;
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      renderTasks();
    }

    function getStats() {
      const total = tasks.length;
      const completed = tasks.filter(t => t.completed).length;
      const pending = total - completed;
      const rate = total > 0 ? Math.round((completed / total) * 100) : 0;
      
      const today = new Date().toISOString().split('T')[0];
      const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
      const completedToday = tasks.some(t => t.completed && t.createdAt.split('T')[0] === today);
      const completedYesterday = tasks.some(t => t.completed && t.createdAt.split('T')[0] === yesterday);
      const streak = completedToday ? (completedYesterday ? '2+' : '1') : '0';

      return { total, completed, pending, rate, streak };
    }

    function isOverdue(deadline) {
      if (!deadline) return false;
      const today = new Date().toISOString().split('T')[0];
      return deadline < today;
    }

    function isDueToday(deadline) {
      if (!deadline) return false;
      return deadline === new Date().toISOString().split('T')[0];
    }

    function renderTasks() {
      const stats = getStats();
      
      // Update stats
      document.getElementById('completion-rate').textContent = stats.rate + '%';
      document.getElementById('progress-bar').style.width = stats.rate + '%';
      document.getElementById('streak').textContent = stats.streak;
      document.getElementById('pending-count').textContent = stats.pending;
      document.getElementById('completed-count').textContent = stats.completed;

      // Filter tasks
      let filtered = tasks.filter(task => {
        if (currentFilter === 'all') return true;
        if (currentFilter === 'active') return !task.completed;
        if (currentFilter === 'completed') return task.completed;
        return task.category === currentFilter;
      });

      // Render task list
      const list = document.getElementById('tasks-list');
      
      if (filtered.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üéØ</div>
            <p style="font-size: 1.125rem;">No tasks yet. Add one to get started! üöÄ</p>
          </div>
        `;
        return;
      }

      list.innerHTML = filtered.map(task => {
        const overdue = isOverdue(task.deadline);
        const today = isDueToday(task.deadline);
        
        let deadlineTag = '';
        if (task.deadline) {
          if (overdue) {
            deadlineTag = `<span class="tag overdue">‚ö†Ô∏è Overdue</span>`;
          } else if (today) {
            deadlineTag = `<span class="tag today">üìÖ Today</span>`;
          } else {
            deadlineTag = `<span class="tag deadline">${task.deadline}</span>`;
          }
        }

        return `
          <div class="task-item ${task.completed ? 'completed' : ''}">
            <div class="checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask(${task.id})"></div>
            <div class="task-content">
              <div class="task-tags">
                <span class="tag ${task.category}">${task.category.charAt(0).toUpperCase() + task.category.slice(1)}</span>
                ${deadlineTag}
              </div>
              <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
            </div>
            <button class="delete-btn" onclick="deleteTask(${task.id})">‚úï</button>
          </div>
        `;
      }).join('');
    }

    // Initialize
    loadTasks();
    checkDueTasks();

    // Register Service Worker
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('SW registered'))
        .catch(err => console.log('SW failed'));
    }
  </script>
</body>
</html>